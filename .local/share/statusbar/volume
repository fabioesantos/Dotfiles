#!/bin/bash

VOLUME="$(awk -F"[][]" '/dB/ { print $2 }' <(amixer sget Master) | sed 's/%//' )"
headphone="$(cat /proc/asound/card0/codec#0 | grep "Pin-ctls" | awk 'NR==2{print $3}')"

if [ $(amixer sget Master | awk 'NR==5{print $6}') = "[off]" ]; then
        VOL_ICON="ðŸ”‡"
        VOLUME="Muted"
elif [ ! "$headphone" = "OUT" ]; then
        VOL_ICON="ï€¥"
elif [ $VOLUME -lt 30 ]; then
	VOL_ICON="ï©¾"
elif [ $VOLUME -lt 60 ]; then
	VOL_ICON="ï©¿"
else
	VOL_ICON="ï©½"
fi

if [ "$VOLUME" = "Muted" ]; then
        echo "$VOL_ICON $VOLUME"
else
        echo "$VOL_ICON $VOLUME%"
fi
